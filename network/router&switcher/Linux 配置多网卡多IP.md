# Linux 配置双网卡双 IP

很多的服务器都提供多个网口，自然就会有多个 IP 地址，多个网口可以让服务器同时连接到多个网段中，比如同时访问内网和外网。
但是服务器的默认网关(Default Gateway)只能有一个，这会导致所有的流量都会从默认网关出去，无法利用上多网口。

服务器的默认网关，其实就是一条动态添加的默认路由，通过如下命令查看：

```shell
ryan@RYAN-MI-DESKTOP:~$ ip route
default via 192.168.112.1 dev eth0
192.168.112.0/20 dev eth0 proto kernel scope link src 192.168.126.6
```

上面输出的第一行就是默认网关生成的路由，第一列是目标 IP 地址(dest ip)，`default` 也可写成 `0.0.0.0/0`，能匹配任何 IP 地址。

路由表是根据优先级进行路由的，我们将外网设为默认网关，然后再配置静态路由让内网流量走内网，这样就大功告成了。

>其实这就是路由器的工作模式，路由器就是有多个网口（甚至包括 WIFI），通过路由表、防火墙、NAT 等策略进行数据的增删查改与路由。


